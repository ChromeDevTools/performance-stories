Adapted from https://tinygo.org/docs/guides/webassembly/wasm/
